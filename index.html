<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Descargar MP3</title>
  <script>
    async function downloadMP3() {
      const url = document.getElementById('url').value;
      const status = document.getElementById('status');
      status.textContent = 'Convirtiendo... espera un momento.';
      try {
        const res = await fetch('/api/download?url=' + encodeURIComponent(url));
        if (!res.ok) throw new Error('Error al descargar');
        const blob = await res.blob();
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'audio.mp3';
        a.click();
        status.textContent = '✅ Descarga completada.';
      } catch (e) {
        status.textContent = '❌ Error al procesar.';
      }
    }
  </script>
</head>
<body style="font-family:sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:#111;color:#fff;">
  <h1>Descargar MP3 de YouTube</h1>
  <input id="url" placeholder="Pega el link de YouTube aquí" style="width:300px;padding:10px;margin:10px;border-radius:6px;" />
  <button onclick="downloadMP3()" style="padding:10px 20px;border:none;background:#28a745;color:white;border-radius:6px;cursor:pointer;">
    Descargar MP3
  </button>
  <p id="status" style="margin-top:10px;"></p>
</body>
</html>
